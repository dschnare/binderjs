/*
 Module: xport
 Author: Darren Schnare
 Keywords: javascript,export
 License: MIT ( http://www.opensource.org/licenses/mit-license.php )
 Repo: https://github.com/dschnare/project-template
*/
(function(){function h(a,b,c){a=a?a.toString():"";c||(c="object"!==typeof window?{}:window);var a=a.split("."),e=a.length,d=c,g,f;for(g=0;g<e-1;g+=1)f=a[g],void 0===d[f]&&(d[f]={}),d=d[f];f=a[e-1];d[f]=b;return c}h("module",function(a,b,c){var e,d;"[object Array]"!=={}.constructor.prototype.toString.call(a)&&(c=b,b=a,a=[],"function"!==typeof b&&(b=function(a){return function(){return a}}(b)));if("function"===typeof define&&"object"===typeof define.a&&define.a)0===a.length?define(b):define(a,b);else if("object"===
typeof exports&&exports&&"function"===typeof require){if(0===a.length)a=b();else{c=[];for(e=a.length;0<e;)e-=1,c.unshift(require(a[e]));a=b.apply(void 0,c)}if(a)for(d in a)a.hasOwnProperty(d)&&(exports[d]=a[d])}else"function"===typeof c&&c()},h);h("xport",h)})();

/*
 Author: Darren Schnare
 Keywords: javascript,util,utility,format
 License: MIT ( http://www.opensource.org/licenses/mit-license.php )
 Repo: https://github.com/dschnare/utiljs
*/
(function(m){function k(a){return void 0===a||null===a?"":a.toString()}function g(a){return a&&"object"===d(a)}function d(a){return null===a?"null":h(a)?"array":typeof a}function l(a){return null===a||void 0===a}var o={}.constructor,h=function(){var a=o.prototype.toString;return function(b){return"[object Array]"===a.call(b)||!l(b)&&"number"===typeof b.length&&"function"===typeof b.push}}(),n={typeOf:d,isObject:g,isArray:h,isNil:l,mixin:function(a){var b=arguments.length,c,e,d;if(!a)throw Error("Expected at least one object as an argument.");
for(c=1;c<b;c+=1)if(d=arguments[c],!l(d))for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);return a},str:k,respondsTo:function(a,b){return a&&"function"===typeof a[b]},adheresTo:function(a,b){var c,e;if((g(a)||"function"===typeof a||h(a))&&(g(b)||"function"===typeof b||h(b))){for(c in b)if(b.hasOwnProperty(c))if("*"===b[c]){if(void 0===a[c])return!1}else if(d(a[c])!==d(b[c])&&d(a[c])!==k(b[c]))return!1;return!0}c=d(a);e=d(b);return c===e},create:function(a){function b(){}if(!a)throw Error("Expected an object as an argument.");
b.prototype=a;return new b},trim:function(a){for(var a=a?a.toString():"",b=0,c=a.charAt(b);c;){if(" "<c){a=a.substring(b);break}b+=1;c=a.charAt(b)}for(b=a.length;b;)if(b-=1,c=a.charAt(b)," "<c){a=a.substring(0,b+1);break}return a},format:function(a){function b(){j-=1;return i=c.charAt(j)}for(var c=k(a),d=arguments,h=d.length,j=c.length,i=null,f=0,g=0;b();)if("}"===i){g=j+1;b();for(f="";"0"<=i&&"9">=i;)f=i+f,b();"{"===i&&(f=parseInt(f,10)+1,f<h&&(c=c.substring(0,j)+d[f]+c.substring(g)))}return c}};
m.module(n,function(){m("UTIL",n)})})("function"===typeof xport?xport:null);

/*
 Author: Darren Schnare
 Keywords: javascript,binding,bind,property,list,observer,observable
 License: MIT ( http://www.opensource.org/licenses/mit-license.php )
 Repo: https://github.com/dschnare/binderjs
*/
function r(w){throw w;}var t=void 0,v=!0,z=!1;
(function(){function w(l){function o(g,e,c){function b(f){return f}var a=l.isArray,f=l.isObject,m=l.adheresTo,d=y.interfce,u={},B,k,n,i,h,p,j,s,q,e=e||u;"function"===typeof e?i=e:(i=e.filter,i="function"===typeof i?i:b);if(a(g)){q=x();d=g.length;for(f=0;f<d;f+=1)q.push(o(g[f],e));c&&(m(c,x.interfce)?c.merge(q):a(c)?c.push.apply(c,q):r(Error("Expected target to be an Array.")))}else if(f(g)){q={};B=x(e.include||[]);k=x(e.exclude||[]);n=x(e.copy||[]);for(j in g)if(g[j]!==t&&"function"!==typeof g[j]&&
(p=e.properties?e.properties[j]:u,s=g[j],h=p?p.create:b,h="function"===typeof h?h:b,s!==t&&(B.contains(j)||!k.contains(j))))if(n.contains(j))if(c)if(m(c[j],d))c[j](o(s,p));else c[j]=o(s,p);else q[j]=o(s,p);else if(a(s))if(c)if(m(c[j],d))c[j](o(s,p));else a(c[j])?o(s,p,c[j]):(h=y(h(o(s,p),c)),c[j]=h,h.owner=c);else h=y(h(o(s,p),q)),h.owner=q,q[j]=h;else if(f(s))if(c)if(m(c[j],d))c[j](o(s,p));else c[j]=o(s,p);else q[j]=o(s,p);else if(c)if(m(c[j],d))c[j](o(s,p));else h=y(h(o(s,p),c)),c[j]=h,h.owner=
c;else h=y(h(o(s,p),q)),h.owner=q,q[j]=h;q=i(q,g)}else q=i(g,g);return c||q}function w(g,e){function c(f){return f}var b,a,f,m,d;a={};m=l.isObject;f=l.isArray;var u=l.adheresTo,B=y.interfce,k,n,i,e=e||a;"function"===typeof e?i=e:(i=e.filter,i="function"===typeof i?i:c);if(f(g)){m=[];a=g.length;for(b=0;b<a;b+=1)m.push(w(g[b],e))}else if(m(g)){m={};k=x(e.include||[]);n=x(e.exclude||[]);for(b in g)if(g[b]!==t&&(k.contains(b)||!n.contains(b)))f=g[b],d=e.properties?e.properties[b]:a,m[b]=u(f,B)?w(f.get(),
d):w(f,d);m=i(m,g)}else m=i(g,g);return m}var x=function(){function g(b){var a=[];a.getItemOperators=function(){return l.create(c)};a.indexOf=a.indexOf||function(f,m){var d,a=this.length,m=isNaN(m)?0:m;if(0===a||m>=a)return-1;0>m&&(m=a+m);0>m&&(m=0);for(d=m;d<a;d+=1)if(this[d]===f)return d;return-1};a.lastIndexOf=a.lastIndexOf||function(f,a){var d;d=this.length;if(0===d)return-1;a=isNaN(a)?d:a;0<=a&&(a=a<d-1?a:d-1);0>a&&(a=d+a);for(d=a;0<=d;d-=1)if(this[d]===f)return d;return-1};a.reverse=a.reverse||
function(){for(var f=0,a=this.length,d=a-1,a=parseInt((a/2).toFixed(0),10),b;f<a;)b=this[d],this[d]=this[f],this[f]=b,d-=1,f+=1;return this};a.map=a.map||function(f,a){var d=0,b=this.length,c=[];c.length=b;"function"!==typeof f&&r(Error("TypeError"));for(d=0;d<b;d+=1)this.hasOwnProperty(d)&&(c[d]=f.call(a,this[d],d,this));return c};a.filter=a.filter||function(f,a){var d,b,c=this.length,e=[];"function"!==typeof f&&r(Error("TypeError"));for(d=0;d<c;d+=1)this.hasOwnProperty(d)&&(b=this[d],f.call(a,b,
d,this)&&e.push(b));return e};a.forEach=a.forEach||function(f,a){var d,b=this.length;"function"!==typeof f&&r(Error("TypeError"));for(d=0;d<b;d+=1)this.hasOwnProperty(d)&&f.call(a,this[d],d,this)};a.reduce=a.reduce||function(f,a){var d=this.length,b=0,c,e;"function"!==typeof f&&r(Error("TypeError"));0===d&&1===arguments.length&&r(Error("TypeError"));if(2===arguments.length)c=a;else{e=z;for(b=0;!e&&b<d;)(e=this.hasOwnProperty(b))&&(c=this[b]),b+=1}for(;b<d;)(e=this.hasOwnProperty(b))&&(c=f.call(t,
c,this[b],b,this)),b+=1;return c};a.reduceRight=a.reduceRight||function(f,a){var d=this.length,b=d-1,c;"function"!==typeof f&&r(Error("TypeError"));0===d&&1===arguments.length&&r(Error("TypeError"));if(2===arguments.length)c=a;else for(d=z;!d&&0<=b;)(d=this.hasOwnProperty(b))&&(c=this[b]),b-=1;for(;0<=b;)(d=this.hasOwnProperty(b))&&(c=f.call(t,c,this[b],b,this)),b-=1;return c};a.some=a.some||function(f,a){var d=this.length,b;"function"!==typeof f&&r(Error("TypeError"));for(b=0;b<d;b+=1)if(this.hasOwnProperty(b)&&
f.call(a,this[b],b,this))return v;return z};a.every=a.every||function(f,a){var b=this.length,c;"function"!==typeof f&&r(Error("TypeError"));for(c=0;c<b;c+=1)if(this.hasOwnProperty(c)&&!f.call(a,this[c],c,this))return z;return v};a.contains=function(f){return 0<=this.indexOf(f)};a.occurances=function(f){for(var a=this.indexOf(f),b=0;0<=a;)b+=1,a=this.indexOf(f,a+1);return b};a.distinct=function(){for(var f=this.length,a=[],b;f;)f-=1,b=this[f],1===this.occurances(b)&&a.unshift(b);return a};a.first=
function(f,a){var b,c=this.length;"function"!==typeof f&&r(Error("TypeError"));for(b=0;b<c;b+=1)if(this.hasOwnProperty(b)&&f.call(a,this[b],b,this))return this[b]};a.last=function(f,b){var a=this.length;for("function"!==typeof f&&r(Error("TypeError"));a;)if(a-=1,this.hasOwnProperty(a)&&f.call(b,this[a],a,this))return this[a]};a.find=function(f,a,b){var c=this.length;"function"!==typeof f&&r(Error("TypeError"));"number"!==typeof a&&!b&&(b=a);if(isNaN(a)||0>a)a=0;for(;a<c;a+=1)if(this.hasOwnProperty(a)&&
f.call(b,this[a],a,this))return{item:this[a],index:a};return{item:t,index:-1}};a.equals=function(a,b){var d,c,e,k;if(!l.isArray(a))return z;if(this===a)return v;if(this.length!==a.length)return z;c=this.length;e=a.length;k=g.getItemOperators(this);b="function"===typeof b?b:function(){return k.equals.apply(k,arguments)};for(d=0;d<c&&d<e;d+=1)if(!b(this[d],a[d]))return z;return v};a.changed=function(a,b,d){var c,e,k,n;if(!l.isArray(a)||this===a)return z;if(this.length!==a.length)return v;n=g.getItemOperators(this);
b="function"===typeof b?b:function(){return n.equals.apply(n,arguments)};d="function"===typeof d?d:function(){return n.changed.apply(n,arguments)};e=this.length;k=a.length;for(c=0;c<e&&c<k;c+=1)if(!b(this[c],a[c])||d(this[c],a[c]))return v;return z};a.compare=function(a,b,c){var u,l=g(),k,n,i,h=this.find,p,j,a=g(a);u=g.getItemOperators(this);b="function"===typeof b?b:function(){return u.equals.apply(u,arguments)};c="function"===typeof c?c:function(){return u.changed.apply(u,arguments)};p=function(a){return b(i,
a)};n=this.length;for(k=0;k<n;k+=1)i=this[k],j=h.call(a,p),0>j.index?l.push(e("deleted",i,k)):(c(i,j.item)?l.push(e("changed",i,k,j.item,j.index)):l.push(e("retained",i,k,j.item,j.index)),delete a[j.index]);n=a.length;for(k=0;k<n;k+=1)a.hasOwnProperty(k)&&(i=a[k],0>this.find(p).index&&l.push(e("added",t,-1,i,k)));i=a=b=c=null;return l};a.merge=function(a,b,c){var e=g(this);e.mergeWith(a,b,c);return e};a.mergeWith=function(a,b,c){var e;e=g.getItemOperators(this);b=this.compare(a,b,c);c=b.length;for(this.length=
a.length;c;)switch(c-=1,a=b[c],a.status){case "added":this[a.otherIndex]=a.otherItem;break;case "deleted":e.equals(this[a.index],a.item)&&(this[a.index]=t);break;case "changed":e.equals(this[a.index],a.item)&&(this[a.index]=t);this[a.otherIndex]=a.otherItem;break;case "retained":e.equals(this[a.index],a.item)&&(this[a.index]=t),this[a.otherIndex]=a.item}this.collapse()};a.remove=function(){var a,b,c,e=arguments.length;for(a=0;a<e;a+=1){c=arguments[a];for(b=this.length;b;)b-=1,this[b]===c&&this.splice(b,
1)}};a.removeAt=function(a){if(isFinite(a)&&0<=a&&a<this.length)return this.splice(a,1).pop()};a.clear=function(){for(;this.length;)this.pop()};a.collapse=function(){for(var a=this.length;a;)a-=1,this[a]===t&&this.splice(a,1)};a.replaceAt=function(a,b){var c;isFinite(a)&&0<=a&&a<this.length&&(c=this[a],this[a]=b);return c};a.isEmpty=function(){return 0===this.length};a.peek=function(){return this[this.length-1]};a.insert=function(a,b){a>this.length+1?a=this.length+1:0>a&&(a=0);return 0<=a?(a===this.length+
1?this.push(b):this.hasOwnProperty(a)?this.splice(a,0,b):this[a]=b,v):z};(function(c){var e=c.length;1===e&&l.isArray(b)?a.push.apply(a,b):e&&a.push.apply(a,a.slice.call(c))})(arguments);return a}function e(b,a,c,e,d){return{status:b,item:a,value:a,index:c,otherItem:e,otherIndex:d,toString:function(){return l.format("{status: {0}, item: {1}, index: {2}, otherItem: {3}, otherIndex: {4}}",b,a,c,e,d)}}}var c={equals:function(b,a){b=b?b.valueOf():b;a=a?a.valueOf():a;return b===a},changed:function(b,a){b=
b?b.valueOf():b;a=a?a.valueOf():a;return b!==a}};g.getItemOperators=function(b){b=b.getItemOperators();"function"!==typeof b.equals&&(b.equals=c.equals);"function"!==typeof b.changed&&(b.changed=c.changed);return b};g.interfce={concat:"function",indexOf:"function",join:"function",lastIndexOf:"function",map:"function",filter:"function",forEach:"function",reduce:"function",reduceRight:"function",reverse:"function",some:"function",shift:"function",slice:"function",sort:"function",splice:"function",every:"function",
pop:"function",push:"function",unshift:"function",toString:"function",contains:"function",occurances:"function",distinct:"function",first:"function",last:"function",find:"function",equals:"function",changed:"function",compare:"function",merge:"function",mergeWith:"function",remove:"function",removeAt:"function",clear:"function",collapse:"function",replaceAt:"function",isEmpty:"function",peek:"function",insert:"function"};return g}(),A=function(){function g(){var c=x(),b=0,a=z,f=[],g=-1;return{block:function(){f.push(v)},
unblock:function(){f.pop()},subscribe:function(a,b){return a&&!c.contains(a)?(a.thisObj=b||t,c.push(a),{dispose:function(){c.remove(a)}}):{dispose:function(){}}},throttle:function(a){isFinite(a)||(a=0);b=a},notify:function(){var d=this;!f.length&&!a&&(a=v,0<b?g=setTimeout(function(){e(d,c);a=z},b):(e(d,c),a=z))},dispose:function(){c.clear();clearTimeout(g)}}}function e(c,b){var a,f,e=b.length;for(a=0;a<e;a+=1)if(f=b[a])if("function"===typeof f)f.call(f.thisObj,c);else if("function"===typeof f.onNotify)f.onNotify(c)}
g.interfce={block:"function",unblock:"function",subscribe:"function",throttle:"function",notify:"function",dispose:"function"};return g}(),C=function(){function g(){var e=[].slice,c=x.apply(t,e.call(arguments));l.mixin(c,A());c.remove=function(b){return function(){var a=this.length,c;this.block();c=b.apply(this,e.call(arguments));this.unblock();a!==this.length&&this.notify();return c}}(c.remove);c.removeAt=function(b){return function(){var a=this.length,c;this.block();c=b.apply(this,e.call(arguments));
this.unblock();a!==this.length&&this.notify();return c}}(c.removeAt);c.replaceAt=function(b){return function(){var a;this.block();a=b.apply(this,e.call(arguments));this.unblock();this.notify();return a}}(c.replaceAt);c.clear=function(b){return function(){var a=this.length,c;this.block();c=b.call(this);this.unblock();a!==this.length&&this.notify();return c}}(c.clear);c.collapse=function(b){return function(){var a=this.length,c;this.block();c=b.call(this);this.unblock();a!==this.length&&this.notify();
return c}}(c.collapse);c.insert=function(b){return function(){var a;this.block();a=b.apply(this,e.call(arguments));this.unblock();a&&this.notify();return a}}(c.insert);c.mergeWith=function(b){return function(){var a;this.block();a=b.apply(this,e.call(arguments));this.unblock();this.notify();return a}}(c.mergeWith);c.reverse=function(b){return function(){var a;this.block();a=b.call(this);this.unblock();this.notify();return a}}(c.reverse);c.pop=function(b){return function(){var a=this.length,c;this.block();
c=b.call(this);this.unblock();a!==this.length&&this.notify();return c}}(c.pop);c.push=function(b){return function(){var a=this.length,c;this.block();c=b.apply(this,e.call(arguments));this.unblock();a!==this.length&&this.notify();return c}}(c.push);c.shift=function(b){return function(){var a=this.length,c;this.block();c=b.call(this);this.unblock();a!==this.length&&this.notify();return c}}(c.shift);c.unshift=function(b){return function(){var a=this.length,c;this.block();c=b.apply(this,e.call(arguments));
this.unblock();a!==this.length&&this.notify();return c}}(c.unshift);c.sort=function(b){return function(){var a=b.apply(this,e.call(arguments));this.notify();return a}}(c.sort);c.splice=function(b){return function(){var a=this.length,c;this.block();c=b.apply(this,e.call(arguments));this.unblock();a!==this.length&&this.notify();return c}}(c.splice);return c}g.interfce=l.mixin({},A.interfce,x.interfce);return g}(),y=function(){var g,e,c=x();c.b=function(b){this.push(b)};c.a=function(b){this.length&&
this.peek().c().add(b)};g=function(b,a,f){function g(){i=t;h.notify()}var d=z,u=x(),o=[],k,n,i,h;u.add=function(a){this.contains(a)||(this.push(a),o.push(a.subscribe(g)))};h=function(a){var b,c=h.owner;this!==t&&(h.owner=this);arguments.length?(h.set(a),b=this):b=h.get();h.owner=c;return b};h.equals=function(a){var b=this.get(),a=e(a),b=b?b.valueOf():b,a=a?a.valueOf():a;return b===a};h.changed=function(a){var b=this.get(),a=e(a),b=b?b.valueOf():b,a=a?a.valueOf():a;return b!==a};h.clearMemo=function(){i=
t};h.get=function(){d||(c.a(this),c.b(this));var a=i===t?n.call(this.owner):i;i=a;c[c.length-1]===this&&c.pop();return a};h.set=function(a){if("function"===typeof k){d=v;if(!this.equals(a)||this.changed(a))this.block(),k.call(this.owner,a),i=t,this.unblock(),this.notify();d=z}};h.dependencies=function(){return u};h.isDependent=function(){return 0!==u.length};h.toString=function(){return l.str(this.get())};h.valueOf=function(){var a=this.get();return l.isNil(a)?a:a.valueOf()};l.mixin(h,A());(function(){var c,
d=h,i=z,q=l.isObject,w=l.isArray,y=l.adheresTo;d.owner=t;"function"===typeof b?(n=b,k="function"===typeof a?a:null,d.owner="function"===typeof a?f:a):q(b)&&"function"===typeof b.get?(i=b.lazy,n=b.get,k="function"===typeof b.set?b.set:null,d.equals="function"===typeof b.equals?b.equals:d.equals,d.changed="function"===typeof b.changed?b.changed:d.changed,d.owner=b.owner):(q(b)?(d.equals="function"===typeof b.equals?b.equals:d.equals,d.changed="function"===typeof b.changed?b.changed:d.changed,c=b.value):
c=b,w(c)&&!y(c,A.interfce)&&(c=C(c),c.getItemOperators=function(a,b,c){a=typeof a==="function"?a:c.equals;b=typeof b==="function"?b:c.changed;return function(){return{equals:a,changed:b}}}(b.equals,b.changed,c.getItemOperators()),d.equals=function(a){a=e(a);return c.equals(a)},d.changed=function(a){a=e(a);return c.changed(a)}),c&&"function"===typeof c.subscribe&&"function"===typeof c.dispose&&o.push(c.subscribe(g)),n=function(){return c},k=function(a){if(y(c,x.interfce)){c.clear();w(a)?c.push.apply(c,
a):c.push(a)}else if(w(c)){for(;c.length;)c.pop();w(a)?c.push.apply(c,a):c.push(a)}else c!==a&&(c=a)});d.dispose=function(a){return function(){for(;o.length;)o.pop().dispose();for(;u.length;)u.pop();a.call(this)}}(d.dispose);i||h.get()})();return h};e=function(b){return b&&"function"===typeof b.get?b.get():b};g.get=e;g.interfce=l.mixin({owner:"*",dependencies:"function",isDependent:"function",clearMemo:"function",get:"function",set:"function",equals:"function",changed:"function"},A.interfce);return g}();
return{utiljs:l,makeList:x,makeObservable:A,makeObservableList:C,makeProperty:y,makeBinding:function(){function g(e,c,b){var a=y.interfce,f=[],b=b||"twoway",b=l.str(b),b=b.toLowerCase();l.adheresTo(e,a)||r(Error("Binding source must be an observable property. "+e));l.adheresTo(c,a)||r(Error("Binding sink must be an observable property. "+c));c.set(e.get());switch(b){case "oneway":a=e.subscribe(function(){c.set(e.get())});f.push(a);break;case "twoway":a=e.subscribe(function(){c.set(e.get())}),f.push(a),
a=c.subscribe(function(){e.set(c.get())}),f.push(a)}a=null;return{type:function(){return b},source:function(){return e},sink:function(){return c},dispose:function(){for(;f.length;)f.pop().dispose()}}}g.interfce={type:"function",source:"function",sink:"function",dispose:"function"};return g}(),toJSON:w,fromJSON:o}}xport.module(["util"],w,function(){xport("BINDER",w(UTIL))})})();
