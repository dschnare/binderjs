/*
Author: Darren Schnare
Keywords: javascript,mustache,template
License: MIT ( http://www.opensource.org/licenses/mit-license.php )
Repo: https://github.com/dschnare/mustachejs
*/
var MUSTACHE=function(){"use strict";var t=null,i=function(){return{isArray:function(){var n={}.constructor.prototype.toString;return function(t){return n.call(t)==="[object Array]"}}(),htmlEscape:function(){var n={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"};return function(t){var i=t.length,u=null,r=null;while(i)i-=1,u=t.charAt(i),r=n[u],r&&(t=t.substring(0,i)+r+t.substring(i+1));return t}}(),trim:function(n){var t=0,i=n.charAt(t);while(i){if(i>" "){n=n.substring(t);break}t+=1,i=n.charAt(t)}t=n.length;while(t){t-=1,i=n.charAt(t);if(i>" "){n=n.substring(0,t+1);break}}return n},indent:function(n,t){var i=n.length,r=null;while(i)i-=1,r=n.charAt(i),(r==="\n"||r==="\r")&&n.charAt(i+1)!=="\n"&&n.charAt(i+1)&&(n=n.substring(0,i+1)+t+n.substring(i+1));return n?t+n:n}}}(),f=function(n){var i={"!":"comment","=":"set-delimiter","":"interpolation","&":"unescape-interpolation","{":"unescape-interpolation","#":"section-begin","^":"invert-section-begin","/":"section-end",">":"partial",".":"implicit"},t=function(r){var s=typeof r.pointer=="function"?function(n){return r.pointer(n)}:function(n){return{value:n,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}},f=s(-1),u=null,h=1,e=function(n){return n!==0&&(f.value+=n||1,u=r.charAt(+f)),u},o=function(n){return r.substr(+f,n)};return{defaultDelimiter:function(){return t.defaultDelimiter()},next:function(c){c||(c=t.defaultDelimiter());var l="",a="",y=-1,v=null,k=c.left,d=k.length,w=c.right,p=w.length,b=function(){y=-1,a="",l="",v=""};f>0&&(f.value-=1);while(e()){u==="\n"?r.charAt(f-1)!=="\r"&&(h+=1):u==="\r"&&(h+=1);if(o(d)===k){y=+f,e(d);switch(u){case"=":case"!":case"&":case"{":case"#":case"^":case"/":case">":a=u;break;case".":a=l=u;break;default:l+=u}while(e())if(!(a==="{"&&w==="}}"&&o(p+1)==="}}}"))if(o(p)===w){e(p);break}else l+=u;a==="="&&(l=l.substring(0,l.length-1));if(a==="."&&l!==a){b();continue}v=i[a];if(!v){b();continue}return{type:v,value:n.trim(l),text:r.substring(y,+f),start:s(y),end:s(+f),line:h}}}return null}}};return t.defaultDelimiter=function(){return{left:"{{",right:"}}"}},t}(i),u=function(){return function(n){n+="";var t=[],i=function(n){return{value:+n,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}};return t.update=function(n,t,i){var u=this.length,e=t-n,r=null,f=function(n){return n>=t};i-=e;while(u)u-=1,r=this[u],f(r)&&(r.value+=i)},{length:n.length,charAt:function(t){return n.charAt(+t)},substr:function(t,i){return n.substr(+t,i)},substring:function(t,i){return n.substring(+t,+i)},replace:function(i){var r=i.substr?n.indexOf(i.substr):+i.begin,f=i.substr?r+i.substr.length:+i.end,u=i.repl===undefined?"":i.repl.toString();n=n.substring(0,r)+u+n.substring(f),t.update(r,f,u.length),this.length=n.length},pointer:function(n){var r=i(n);return t.push(r),r},clearPointers:function(){while(t.length)t.pop()},invalidatePointers:function(){while(t.length)t.pop().value=-1},indexOf:function(r,u){var f=i(n.indexOf(r,+u));return f<0||t.push(f),f},lastIndexOf:function(r,u){var f=i(n.lastIndexOf(r,+u));return f<0||t.push(f),f},toString:function(){return n},valueOf:function(){return n}}}}(),e=function(){return function(n){var t=[{}],i={context:function(){return t[t.length-1]},get:function(n){var i=t.length;while(i){i-=1;if(t[i][n]!==undefined)return t[i][n]}return undefined},push:function(n){return t.push(n),n},pop:function(){return t.length!==1&&t.pop(),this.context()}};return arguments.length===1&&(i.push(n),n=null),i}}(),r=function(n,t,i,r){var o=function(n,t,i,u,f,e){var c=n.split("."),s=0,o=i.get(n),l=c.length,h=i;t=t.toString();if(typeof o=="function")o=o.length===1?e.parse({template:o.call(o,t),data:i.context(),partials:f,delim:u}):e.parse({template:o.call(o),data:i.context(),partials:f});else for(s=0;s<l;s+=1)n=c[s],o=h.get(n),o!==undefined?(typeof o=="function"&&(o=o.length===1?o.call(o,t):o.call(o)),h=r(o)):o="";return o},s=function(n,t,i){var o=n.split("."),f=0,u=i.get(n),s=o.length,e=i;t=t.toString();if(typeof u=="function")u=!0;else for(f=0;f<s;f+=1)n=o[f],u=e.get(n),u!==undefined?(typeof u=="function"&&(u=u.length===1?u.call(u,t):u.call(u)),e=r(u)):u="";return u},e=function(n,t,i){var o=n.split("."),f=0,u=t.get(n),s=o.length,e=t;if(typeof u=="function")u=i.parse({template:u.call(u),data:t.context(),partials:{}});else if(n===".")u=t.context();else for(f=0;f<s;f+=1)n=o[f],u=e.get(n),u!==undefined?(typeof u=="function"&&(u=u()),e=r(u)):u="";return u},f=function(t){var l=t.template,i=t.data,h=t.delim,f=t.contextStack,s=t.partials,c=t.parser,r=0,e=0,o="",u=null;for(n.isArray(i)||(i=i?[i]:[]),e=i.length,r=0;r<e;r+=1)f.push(i[r]),u=c.parse({template:"="+l+"=",data:i[r],contextStack:f,partials:s,delim:h}),o+=u.substring(1,u.length-1),f.pop();return o},u=function(n,t){var r=n.start-1,i=t.charAt(r),u=!0,f=0,e="";while(i){if(i>" "){u=!1;break}else if(i==="\n"||i==="\r")break;r-=1,i=t.charAt(r)}f=r+1;if(u){r=t.pointer(n.end),i=t.charAt(r);while(i){if(i>" "){u=!1;break}else if(i==="\n"||i==="\r"){i==="\r"&&t.charAt(r+1)==="\n"&&(r.value+=1);break}r.value+=1,i=t.charAt(r)}u&&(e=t.substring(f,n.start),t.replace({begin:f,end:n.start}),t.replace({begin:n.end,end:r+1}))}return e};return function(){return{parse:function(h){var c=t(h.template?h.template.toString():""),w=h.partials||{},k=h.data||{},b=i(c),a=h.delim||b.defaultDelimiter(),v=h.contextStack||r(),y=this,l=null,p=function(n,t){c.replace({begin:n.start.value,end:n.end.value,repl:t})},g=function(n,t){u(n,c),c.replace({begin:n.start.value,end:n.end.value,repl:t})},rt=function(n){var r,i,t;if(n.value&&n.value.indexOf("=")<0){r=n.value.split(" "),i=r[0],t=r[1];if(i.indexOf(" ")>=0||t.indexOf(" ")>=0)throw new Error('Invalid custom delimiter: "'+n.text+'" on line '+n.line);a.left=i,a.right=t,g(n)}else throw new Error('Invalid custom delimiter: "'+n.text+'" on line '+n.line);},ut=function(t){var i=e(t.value,v,y);i?(i=n.htmlEscape(i.toString()),p(t,i)):p(t)},ft=function(n){var t=e(n.value,v,y);t?(t+="",p(n,t)):p(n)},it=function(t){var r="",f=u(t,c),i=w[t.value];i&&(f&&(i=n.indent(i,f)),r=y.parse({template:i,data:k,contextStack:v,partials:w})),p(t,r)},d=function(n){var t=b.next(a),i=[];while(t){switch(t.type){case"section-end":if(i.length&&t.value===i[i.length-1].value)i.pop();else if(n.value===t.value){if(!i.length)return t;throw new Error('Unbalanced sections encountered: "'+t.text+'" on line '+t.line);}break;case"section-begin":case"invert-section-begin":i.push(t)}t=b.next(a)}throw new Error('Missing end-section for section : "'+n.text+'" on line '+n.line);},tt=function(t){var r=d(t),e=null,i=null;if(!r)throw new Error('Unbalanced sections encountered: "'+t.text+'" on line '+t.line);u(r,c),u(t,c),e=c.substring(t.start+t.text.length,r.end-r.text.length),i=o(t.value,e,v,a,w,y),typeof i=="string"?c.replace({begin:t.start,end:r.end,repl:i}):i&&(!n.isArray(i)||i.length)?c.replace({begin:t.start,end:r.end,repl:f({template:e,data:i,contextStack:v,partials:w,parser:y,delim:a})}):c.replace({begin:t.start,end:r.end})},nt=function(t){var r=d(t),e=null,i=null;if(!r)throw new Error('Unbalanced sections encountered: "'+t.text+'" on line '+t.line);u(r,c),u(t,c),e=c.substring(t.start+t.text.length,r.end-r.text.length),i=s(t.value,e,v),i=i&&(!n.isArray(i)||i.length)?!1:!0,i&&(!n.isArray(i)||i.length)?c.replace({begin:t.start,end:r.end,repl:f({template:e,data:i,contextStack:v,partials:w,parser:y,delim:a})}):c.replace({begin:t.start,end:r.end})};v.push(k),l=b.next(a);while(l){switch(l.type){case"implicit":p(l,k);break;case"comment":g(l);break;case"set-delimiter":rt(l);break;case"interpolation":ut(l);break;case"unescape-interpolation":ft(l);break;case"partial":it(l);break;case"section-begin":tt(l);break;case"invert-section-begin":nt(l);break;default:throw new Error('Unexpected token: "'+l.text+'" on line '+l.line);}l=b.next(a)}return v.pop(),c.toString()}}}}(i,u,f,e),n={render:function(n,t,i){var u=r();return u.parse({template:n,data:t,partials:i})}};if(typeof define=="function"&&typeof define.amd=="object")define(n),n=undefined;else if(typeof exports!="undefined"){for(t in n)exports[t]=n[t];n=undefined}return n}()